[["index.html", "Arts escèniques About Usage", " Arts escèniques Projecte de pràctiques d’empresa del grau F.P. ASISX I.E. Maria Enriquez Gandia 2022 Ramiro Palau 2022-05-10 About Nota: El llibre encara està en fase de construcció, disculpeu les faltes ortogràfiques i la incoherència del text Documentació dels projectes proposats a realitzar en el desenvolupament de les pràctiques realitzades en Espacio Inestable. Usage Anirem detallant els diferents projectes que se suggereixen per a digitalitzar les arts escèniques, amb una breu descripció de la seua posada en funcionament, requisits, pros i contres. En cas afirmatiu s’aniria desenvolupant la manera d’implantar-lo, cost, i detallarem el seu funcionament i configuració. La idea, es que aquest document siga una guia per mantenir els projectes elaborats o replicar-los en altres llocs, i anar actualitzant els recursos, com forme evolucione la tecnologia i necessitats de l’empresa. "],["reproducció-en-línia.html", "Projecte 1 Reproducció en línia 1.1 Materials 1.2 Projecte d’instil·lació 1.3 Pressupost 1.4 Software 1.5 Hardware necessari 1.6 Muntatge 1.7 càmeres 1.8 La gravadora (NVR) 1.9 zonaminder 1.10 Motioneye 1.11 camare ip barates", " Projecte 1 Reproducció en línia Implantació d’un sistema de reproducció en línia per a la sala Es vol posar un sistema de streaming per a la sala i les seues funcions, o per tindre una còpia de les obres per poder-les editar més tard. 1.1 Materials Es requeriria Servidor, podria ser un ordinador de sobretaula, es pot mirar el que es gasta ara per a la venda d’entrades, per veure si compleix els requisits mínims per als serveis que finalment es volen donar, o un servidor dedicat, on centralitzem tots els serveis. (Comentaré aquest cas en l’apartat servidor) Un servidor de disc, que podria ser el servidor dels altres apartats per guardar una còpia de les diferents càmeres. Si hi ha pressupost, es faria un RAID 5. Càmeres ip i millors micròfons que envien el so per la connexió de xarxa de la càmera. Switch PoE, es podria posar una de 4 ports en l’escenari, per a facilitar l’escalat posterior del projecte que no són massa cars, i un switch (aquest no PoE) en les oficines per centralitzar la xarxa. Tirar cable entre ells i les càmeres. Reduint la distància del PoE a les càmeres ip. Examinat la distribució del teatre, el millor és fer una topologia senzilla de la xarxa, Posar un switch i el servidor, en el quarto de les llums que està centrat, seria un bon joc, i d’alli traure cables a la resta dels departaments. Conte en una plataforma de streaming de l’elecció de la sala, youtube, twitch. Programa de streaming (OBS, Livestream Studio, Wirecast, vMix, mimoLive o Tricaster) alternatives gratuïtes. Un ordinador o portàtil que duga a terme les tasques de producció, podria ser un dels ordinadors de l’empresa que gasta per a disseny, s’utilitzaria en el moment de fer la producció en viu. Per a fer streaming d’una obra editada a posteriori, de les còpies fetes en el servidor de disc, no faria falta. 1.2 Projecte d’instil·lació Es faria fent tres xarxes diferents, una per al circuit d’imatge i so de les càmeres, altra per al wifi de la sala i la tercera per als equips d’administració. Per això, necessitem un switch en l’oficina que puga fer diverses xarxes virtuals, per tindre-les separades. (no volem que un espectador puga entrar en els ordinadors de l’oficina, o sature internet i done latència al streaming) 1.3 Pressupost 1.4 Software Programes de streaming, OBS, Livestream Studio, Wirecast, mimoLive. Es recomana per a començar OBS o Livestream, en cas que l’ordinador que farà de centre de producció siga un Mac, l’opció serà OBS. Programes Programes Desc OBS Programari gratis per a gravar video i streaming. Livestream Studio Per a Windows Wirecast De pagament. MimoLive Pagament processional. 1.5 Hardware necessari 1.5.1 Servidor Es comenta que es pot reutilitzar l’ordinador que es te en venda d’entrades, es pot mirar a veure si compleix els requisits mínims requerits. En principi, no crec que faça falta un massa potent per al que volem posar. En el servidor s’implementaran serveis de DNS, Servidor de fulles web, (controlador de domini, no crec que siga necessari, però es pot posar també, si volem controlar els recursos que tinga accés cada membre) Es podia discutir si interessa un sistema de comunicacions intern, per poder comunicar mitjançant so, vídeo o xat entre el control i l’escenari. o volen passar informació en temps real als actors en l’escenari des de control. hi ha diverses opcions lliures, per exemple Jitsi meet, hauria de mirar-ho, ho he de provar varie vegades, i no he pogut fer-lo funcionar, es cosa d’insistir. Aço li donaria un poc mes de faena al servidor, però com no serien molts interlocutors, no crec que requerisca massa potencia. Es podria posar també un sistema de cloud intern, que ja integra les videoconferències i moltes més coses per al treball en equip, però supose que amb un equip reduït, igual no val la pena, si soles es local, i la gent treballa des de casa la major part del temps. Es pot contractar un conte en línia, però ja s’està gastant el drive. Es pot fer una demo, i si interessa es deixa. Sistema de correu intern, no li veig massa sentit, però es pot posar. Al servidor de web, es pot instal·lar una còpia de WordPress, per si es vol experimentar com es veuen les coses abans de publicar-les. Es pot configurar perquè cada usuari de la sala tinga el seu directori per penjar les seues fulles. Crec que seria interessant, per servir presentacions de les obres que es van a representar, si al final s’instal·la wifi en la sala, que tinguen una primera fulla al connectar, on es parle de l’obra que van a veure, de les pròximes que es representaran una fulla, o on es puga interactuar amb ells, passant qüestionaris, convidant-los a fer comentaris … ( açò es intern i soles es pot realitzar amb la gent que es connecte al wifi) En principi l’ordinador per fer el streaming, ha de tindre una targeta de vídeo mitjanament potent, no crec que siga el cas del servidor, aquest no requereix ni pantalla una vegada instal·lat, es gastaria algun altre disponible en la sala, en cas necessari, ho podíem fer també en aquest, però va augmentant el nivell de requisits mínims de potència. Si se m'ocorre alguna cosa més la posaré, o ja em digueu. 1.5.2 Servidor de disc Si es volen guardar les còpies de les càmeres, i la idea es no fer un streaming pur, més bé editar a posteriori les imatges, o tindre una còpia dels assajos per veure en què es pot millorar, es requeriria espai per fer aquestes còpies. Hi ha dues possibilitats. NAS, sistema de disc en xarxa, La millor opció. Que la torre que gastem de servidor , faça de servidor de disc, on es pot implementar configurar RAID en diferents tipus de redundàncies, segons el nombre de discs durs que tinguem, i si ens interessa més la velocitat o la redundància. 1.5.3 Càmeres ip Hi ha dos tipus de càmeres ip que ens vindrien bé, unes són del tipus PTZ es poden controlar remotament, i altres que són fixes, més barates. Es podria fer una mix dels dos tipus, la frontal a l’escenari, podria fer fixa, i en algun lateral posar una amb moviment. El projecte es pot implantar per fases, primer provar en una, i si dona resultat anar ampliant, segons necessitats. Per les característiques dels espectacles, es requeriria càmeres amb bona lluminositat, bones lents, açò augmentara el pressupost, pero segons les capacitats es pot anar fent, i millorar si es considera que val la pena. Les càmeres i el muntatge està pensat per poder ser fàcilment desmuntable i transportat en cas de tindre la necessitat de realitzar l’espectacle extern a la sala. O reutilitzar el material obsolet per aquest fi. Llista provisional de recerca de càmeres i marques. camera en amazon zowietek Axis Getlockers Ptzoptics 1.5.4 El compte del streaming És traure un compte en alguna de les plataformes que existeixen, ja teniu un compte en youtube, es pot gastar eixa o traure en twitch, a veure quina deixa configurar més la pàgina d’inici, es pot crear una nova on enllaçar els continguts, o integrar-los en les fulles de l’empresa. 1.6 Muntatge Faré proves de tot açò i penjaré el resultat de com es fa. 1.7 càmeres L’únic requisit és que totes les vostres càmeres IP, independentment del fabricant, siguen compatibles amb el protocol ONVIF o el flux RTSP/MJPEG. Les millors aplicacions de visualització de càmeres IP per a dispositius Android monitor tinyCAM El monitor tinyCam ve en dues versions, la gratuïta amb funcions limitades i la versió professional de pagament. El bàsic pot funcionar bé si busqueu alguna cosa senzilla. Utilitza el protocol ONVIF, la transmissió RTSP, etc., i pot transmetre en directe el canal de vídeo sense cap retard. La versió de pagament és d’uns 5 dòlars i és un pagament únic. Podeu utilitzar aquesta aplicació per veure la vista en directe de les vostres càmeres 1.8 La gravadora (NVR) En un sistema de càmeres de seguretat IP, el NVR (Network Video Recorder) és central que gestiona i emmagatzema les imatges de vídeo. Totes les càmeres IP enviaran les seues dades a les gravadores des de les quals podeu visualitzar en directe o fer còpies de seguretat de les gravacions. L’NVR està especialitzat a fer funcionar la càmera sense problemes, utilitzen diversos algorismes de compressió per gestionar i emmagatzemar el metratge de manera eficient. Depenent de la marca, podeu instal·lar 1-4 peces d’un disc dur a l’NVR. La qualitat de la imatge dels vídeos depén de la càmera (no de l’NVR), com més alta siga la resolució i més clara siga la imatge. Tots els sistemes de càmeres enumerats en aquesta guia ofereixen imatges d’alta resolució (4MP o més). camera amcrestultra hd 4k Amcrest UltraHD 4K (8MP) Càmera PoE de Seguridad IP para Exteriores, 3840 x 2160, 164 pies de visión Nocturna, Lente de 2,8 mm, IP67 Resistente a la Intemperie, grabación MicroSD 239,68€ Cuenta con una capacidad mejorada de poca luz utilizando el último sensor de imagen IMX274 Sony Starvis y el chipset S3LM Ambarella. CCTV AND NVR SOLUTION INSTALLATION GUIDE FOR UBUNTU 20.04 LINUX! install Location of text walk through: Guide Start Download the install script $ sudo wget https://gitlab.com/Shinobi-Systems/Shinobi-Installer/raw/master/shinobi-install.sh $ sudo chmod 777 shinobi-install.sh $ sudo ./shinobi-install.sh Installtion prompt responses --------------------------------------------- Install the Development branch? (y)es or (N)o? Default : No -&gt;No --------------------------------------------- ======== Select your OS If your OS is not on the list please refer to the docs. ======== 1. Ubuntu - Fast and Touchless 2. Ubuntu - Advanced 3. CentOS 4. CentOS - Quick Install 5. MacOS 6. FreeBSD 7. OpenSUSE ======== -&gt; 1 --------------------------------------------- Shinobi - Do you want to temporarily disable IPv6? Sometimes IPv6 causes Ubuntu package updates to fail. Only do this if your machine doesn&#39;t rely on IPv6. (y)es or (N)o -&gt; Y --------------------------------------------- ===================================== ||===== Install Completed =====|| ===================================== || Login with the Superuser and create a new user!! ||=================================== || Open http://172.16.195.4:8080/super in your web browser. ||=================================== || Default Superuser : admin@shinobi.video || Default Password : admin ===================================== ===================================== ----------------------------------------------- Once you have created your admin user under the /super url navigate to http://YOUR_RPI_IP_ADDRESS and login with the credentials you created. • 720p outdoor analog and IP PoE PTZ security camera price would be $70-$200. • 1080p PoE PTZ IP camera price is typically $130-$400. • 4MP (1440p) &amp; 5MP outdoor PoE PTZ IP camera price is $200-$600. • The 4K Ultra HD outdoor PTZ security camera price range is $1000-$3000. • The price of outdoor PoE PTZ dome cameras with auto motion tracking is $300-$700. 1.9 zonaminder resenya VM zonaminder [docu]/https://zoneminder.readthedocs.io/en/latest/userguide/definemonitor.html Track Motion Aquesta i les quatre opcions següents s’utilitzen amb la funció de moviment experimental. Això només funcionarà si la vostra càmera admet modes de moviment mapejat en què un punt d’una imatge es pot assignar a una comanda de control. Això és generalment més comú a les càmeres de xarxa, però es pot replicar fins a cert punt en altres càmeres que admeten modes de moviment relatiu. Consulteu la secció Control de la càmera per obtenir més detalls. Marqueu aquesta casella per activar el seguiment de moviment. estimacio de memoria que necesita ref Min Bits of Memory = 20% overhead * (image-widthimage-heightimage buffer sizetarget color spacenumber of cameras) image-width i image-height són l’amplada i l’alçada de les imatges per a les quals està configurada la càmera (en el meu cas, 1280x960). Aquest valor es troba a la pestanya Font de cada monitor La mida de la memòria intermèdia és el nombre d’imatges que ZM conservarà a la memòria (ZM l’utilitza per assegurar-se que té imatges prèvies i posteriors abans de detectar una alarma; molt útil perquè quan es detecta una alarma, el motiu de l’alarma pot ser sortir de la vista i un buffer és realment útil per a això, inclòs per analitzar estadístiques/puntuació). Aquest valor es troba a la pestanya de memòria intermèdia de cada monitor L’espai de color objectiu és la profunditat de color: 8 bits, 24 bits o 32 bits. Torna a estar a la pestanya font de cada monitor La sobrecàrrega del 20% a la part superior del càlcul per tenir en compte les despeses generals d’imatge/stream (aquesta és una estimació) El desglossament matemàtic de 4 càmeres amb captura de 1280 x 960, memòria intermèdia de 50 fotogrames, espai de color de 24 bits: 1280*960 = 1,228,800 (bytes) 1,228,800 * (3 bytes for 24 bit) = 3,686,400 (bytes) 3,686,400 * 50 = 184,320,000 (bytes) 184,320,000 * 4 = 737,280,000 (bytes) 737,280,000 / 1024 = 720,000 (Kilobytes) 720,000 / 1024 = 703.125 (Megabytes) 703.125 / 1024 = 0.686 (Gigabytes) Uns 700 MB de memòria. Així que si teniu 2 GB de memòria, hauríeu d’estar tot a punt. Dret? No, realment: Aquesta és només la memòria base necessària per capturar els fluxos. Recordeu que ZM sempre està capturant fluxos, independentment de si realment esteu gravant o no, per assegurar-vos que el seu buffer d’anell d’imatge hi hagi amb imatges prèvies quan s’activa una alarma. També heu de tenir en compte altres processos no relacionats amb ZM que s’executen a la vostra caixa També heu de tenir en compte altres processos ZM; per exemple, em vaig adonar que el dimoni d’auditoria ocupa una bona quantitat de memòria quan s’executa, les actualitzacions de la base de dades també ocupen memòria. Si utilitzeu la codificació H264, també emmagatzema molts fotogrames a la memòria. Per tant, una bona regla general és assegurar-vos que teniu el doble de memòria que el càlcul anterior (i si feu servir el servidor ZM per a altres propòsits, tingueu en compte aquests requisits de memòria també). Recordeu també que per defecte ZM només utilitza el 50% de la vostra memòria disponible tret que la canvieu Com a resultat, ZM utilitza memòria mapejada i, de manera predeterminada, el 50% de la vostra memòria física és el que arribarà. Quan arribeu a aquest límit, ZM es descompon amb diversos errors. Una bona manera de saber quanta memòria s’assigna a ZM per al seu funcionament és fer adf -h cpu Els diferents elements de ZoneMinder poden estar implicats en una activitat força intensa, especialment mentre s’analitzen imatges per veure’n el moviment. Tanmateix, en general, això no hauria d’aclaparar la vostra màquina tret que sigui molt antiga o amb poca potència. unció d’execució. Òbviament, l’execució en els modes Record o Mocord o en Modect amb molts esdeveniments genera molta activitat de base de dades i fitxers i, per tant, augmentarà la CPU i la càrrega. *Zones de detecció predeterminades bàsiques. Per defecte, quan s’afegeix una càmera, s’afegeix una zona de detecció que cobreix tota la imatge amb un conjunt de paràmetres per defecte. Si la vostra càmera cobreix una vista en la qual és poc probable que diverses regions generin una alarma vàlida (és a dir, el cel), experimentaria amb la reducció de la mida de les zones o afegint zones inactives per esborrar àrees que no voleu controlar. Per exemple, si tinc un dimoni “zma” ​​en execució per a un monitor que està capturant una imatge. He comentat l’anàlisi real, així que tot el que fa és combinar la imatge amb l’anterior. En mode de color, això triga ~ 11 mil·lisegons per fotograma al meu sistema i la càmera està capturant a ~ 10 fps. Si utilitzeu ‘superior’, s’informa que el procés fa servir el ~5% de la CPU i que està permanentment en estat R(un). En canviar al mode d’escala de grisos, la combinació triga ~ 4 ms (com és d’esperar, ja que és aproximadament un terç d’11), però la part superior informa que el procés és ara amb 0% de CPU i permanentment en estat S (leep). Per tant, un canvi real d’ús de recursos de la CPU d’un factor de 3 provoca grans diferències en l’ús de la CPU informat. CPU en camara ip En mode modect Les càmeres IP requereixen un nivell addicional de processament a les targetes analògiques, ja que les imatges jpg o mjpeg s’han de descodificar abans d’analitzar-les. Això necessita grunyits. Si teniu moltes càmeres, necessiteu molts grunyits. solucions * Augmenta la memòria RAM. Si el vostre sistema ha d’utilitzar l’intercanvi de disc, afectarà Enormement el rendiment en totes les àrees. * Zoneminder també funciona molt bé amb diversos sistemes de processadors fora de la caixa (si SMP està habilitat al vostre nucli). La càrrega de diferents càmeres es distribueix entre els processadors. * Disc dur Com a guia ràpida, tinc 4 càmeres a 320x240 que emmagatzemen 1 fps excepte durant els esdeveniments d’alarma. Després d’1 setmana, s’han utilitzat 60 GB d’espai al volum on s’emmagatzemen els esdeveniments (/var/www/html/zm). Calcul de espai Format HDV 1080 Resolution 1440x1080 Frame rate 25 Video length 1 hours Total space: 10.99 GB Format H.264 1080 Resolution 1920x1080 Frame rate 25 Video length 1 hours Total space: 36.17 GB Auto trackin zoneminder auto tracking zmtrack.pl xarxa RTSP, 1920 x 1080 at 60 FPS requires a bitrate or 12,288 Kb/s while the same resolution at 30 FPS only requires a bitrate of 8,192 Kb/s. RTMP 1920x1080@60fps bitrate = 4,500 - 9,000 Kbps i-frame interval: 120 (2 seconds) CBR 1920x1080@30fps bitrate = 3,000 - 6,000 Kbps i-frame interval: 60 (2 seconds) CBR Camera Settings for Low Light Performance Resolution: 1920x1080p 30fps Camera Aperture: small such as 1.8 Camera Shutter Speed: slow 1/120 Camera Focus: Manua Low Light: Noise Reduction 2D Noise Reduction: Ideal for scenes with a lot of movement. 3D Noise Reduction: Ideal for static fields of view. Tip: Try using a combination of 2D &amp; 3D Noise Reduction for best results 1.10 Motioneye 1.11 camare ip barates OBSBOT Tiny PTZ Cámara web 4K, encuadre y enfoque automático, cámara de video conferencia 4K con micrófonos omnidireccionales duales, seguimiento automático con cardán de 2 ejes, HDR, 60 FPS, corrección de poca luz, transmisión US$269.00 usb Amcrest Cámara 4K POE AI Detección humano/vehículo, UltraHD 8MP Torreta de seguridad para exteriores POE Cámara IP, 3840x2160, gran angular, IP67 resistente a la intemperie, MicroSD, micrófono integrado, blanco (IP8M-T2669EW-AI) amcerest US$139.99 espaecificacions Amcrest Cámara IP PoE con torreta AI de color nocturno con visión nocturna a todo color Amcrest Cámara IP PoE 5Mp US$89.99 Noise Reduction 3D DNR Storage FTP, Protocol IPv4, IPv6, HTTP, TCP, UDP, RTSP, TCP, RTMP, SMTP, FTP, DHCP, DDNS, UPnP, NTP LA fixa Amcrest UltraHD 4K (8 MP) POE IP, cámara exterior, 3840 x 2160, 131 pies NightVision 129,99€ especificacions NightColor La tecnologia d’avantguarda NightColor us permet obtenir una imatge nítida fins i tot quan és fosc. Aquesta càmera té 2 LED blancs que transmeten els seus raigs infrarojos en una freqüència imperceptible a l’ull humà. Les llums blanques emeten brillants que ofereixen una increïble gamma de NightColor de 66 peus. Amb aquesta potent funció, podeu obtenir una consciència total sobre allò que no s’havia vist anteriorment i fer-ho d’una manera indetectable. cameraes amb nightvolor barata Reolink 5MP PTZ Cámara 139,99€ fixa reolink 4K 94,99€ "],["implantació-dentorn-git.html", "Projecte 2 Implantació d’entorn Git 2.1 Implantació del sistema col·laboratiu en el desenvolupament d’obres de teatre. 2.2 Beneficis de la seua implantació 2.3 Mode de funcionament 2.4 Instal·lació d’un repositori en el centre 2.5 Possible implantació en el repositori en internet 2.6 Explorar Obsidian 2.7 Explorar Wikimedia per a la realització d’escriptura col·laborativa", " Projecte 2 Implantació d’entorn Git Explorar la forma d’integrar el concepte git en les arts escèniques. Explorar els avantatges del seguiment de versions, i el procés col·laboratiu per a l’elaboració de publicacions o la creació d’obres de teatre, 2.1 Implantació del sistema col·laboratiu en el desenvolupament d’obres de teatre. Es pot realitzar mitjançant la creació d’un compte en una de les plataformes Git que hi ha en internet, Configurant un servidor git en el mateix centre de treball Git i un servidor web, aquesta opció es per a gastar l’entorn git en consola, no es recomana per a l’empresa. Un entorn web, he fet proves en GitLab i Gitea, i el final crec que la millor opció és la de Gitea pel reduït gaste de recursos que fa i la facilitat d’ús. Es pot mirar d’enllaçar el repositori git en el conte de drive que té l’empresa, per fer un repositori privat per als membres. 2.2 Beneficis de la seua implantació Els beneficis són els mateixos que per a la creació de projectes informàtics, però que son poc utilitzat en el món de les lletres. Possibilitat de crear obres col·laboratives. El guardat de les diferents versions segons va desenvolupant-se el projecte, i poder tornar en el temps si alguna cosa no va bé. Bifurcar camins d’exploració en la creació literària. 2.3 Mode de funcionament 2.3.1 Breu tutorial per al funcionament 2.4 Instal·lació d’un repositori en el centre Procés d’instal·lació d’un repositori de git Git i Apache buscar la fulla on ho explica Instal·lació de gitea , o bé directament, o per una imatge Docker Servir el git en un espai onedrive, pareix que és per consola, mirar algun client de git desktop que facilita les coses. 2.5 Possible implantació en el repositori en internet El més fàcil seria traure un compte en una de les plataformes que hi ha en internet, el problema és el recel que tinga l’empresa pel tema de privacitat. Aquestes plataformes tenen l’opció de crear repositoris privats, on soles es pot connectar al que convideu. 2.6 Explorar Obsidian Obsidian és un editor de notes en funcions de seguiment git, per veure diff i altres funcions. Prou interessant, o com a alternativa Zettlr, dona error en posar diccionaris. I implantació d’un servidor de Languagetool 2.7 Explorar Wikimedia per a la realització d’escriptura col·laborativa L’escriptura col·laborativa mitjançant ferramentes de xarxa, com la Wikipedia, on és possible discutir els convits proposats, obrir discussions sobre el text analitzat. Es pot explorar el concepte de Narrativa hipertextual fent servir aquesta ferramenta. "],["migració-de-les-fulles-web-a-hugo.html", "Projecte 3 Migració de les fulles web a Hugo 3.1 Avantatges de la migració 3.2 Mode d’implementar la migració 3.3 Organització dels diferents apartats de les fulles 3.4 Alternativa, merege WordPress", " Projecte 3 Migració de les fulles web a Hugo En principi descartat 3.1 Avantatges de la migració Hugo és un framework per a construir fulles estàtiques La fulla web de l’empresa està implementada en WordPress,Hugo és una alternativa per la realització del projecte d’aquesta fulla, on el seu manteniment i implementació és molt més senzilla. Hugo és un framework on una vegada configurat el tema de la fulla, els autors de les publicacions, soles han de penjar un document de text, en format Markdown perquè aquests nou posts es publique, l’organització en carpetes i mitjançant tags ens facilita molt l’administració del lloc, a més de la seua seguretat, ja que soles compartim fulles estètiques, sense fer ús de bases de dades, reduint considerablement el seu manteniment. 3.2 Mode d’implementar la migració Una vegada que l’empresa passe la còpia de seguretat de les fulles WordPress, hi ha una forma de passar els posts a Markdown. Ordenant en diferents carpetes, per contingut temàtic i autors, on cada autor o secció te la seua carpeta on colgar els nous posts, en fitxer de text md i les imatges que vulga que apareguen. 3.2.1 Conversió dels posts de WordPress a md Possibles solucions per al procés How To Convert WordPress To Markdown How to export a large Wordpress site to Markdown Exporting Wordpress Posts To Markdown Quan estiguem en el cas estudiarem en més profunditat la manera de fer-ho Estic mirant per a fer una xicoteta demostració de les característiques d’Hugo, per fer una posada en comú de com funciona, i si és factible la seua migració. Una altra possibilitat de la seua implantació, és si es realitza la instal·lació d’una zona wifi en el pati de butaques, a l’hora de donar els paràmetres de la xarxa (nom de xarxa i contrasenya), que es faria en un codi QR (alguna cosa pareguda açò, ja ho desenvoluparé un poc mes en l’apartat wifi), es pot passar una direcció d’entrada automàtica a una fulla web, que estaria en el servidor de la xarxa local, on es pot passar informació de l’obra que és representar, o realitzar interacció amb el públic, en temps real. 3.2.1.1 Possibles interaccions amb el públic Les fulles del servidor intern per al públic, recomane que es facen amb Hugo, ho deixaré preparat perquè siga molt fàcil la creació de fulles noves. On soles s’ha de colgar un fitxer de text en un directori determinat… bo, i compilar la fulla, però ja deixaré un script que ho faça, miraré la forma de fer-ho soles, integració continuada crec que es diu. Es pot fer en WordPress si vos és més fàcil, és parlar-ho i provar. Preàmbul de l’obra que es va a representar, perquè el públic s’informe o posar en context de què van a veure, uns minuts abans que comence. Es pot dur a terme una web app de xat per a conferències, el públic puga colgar allí les seues preguntes, i des de la taula, poder seleccionar les més interessants, o la persona a la qual es donara veu. Fer obres interactives amb el públic, on aquest puga fer votacions, mitjançant el seu mòbil, i d’aquesta forma poder canviar el desenllaç de l’obra en temps real. En definitiva, si es configura una xarxa en la sala, poder traure tot el rendiment possible, ja que en l’actualitat tot el món té un mòbil damunt. 3.3 Organització dels diferents apartats de les fulles 3.4 Alternativa, merege WordPress En cas contrari, es miraria la forma de combinar els 5 WordPress en un sol, fer merge wordpress mirar que més alternatives hi ha. "],["implantació-de-projectes-exelearning.html", "Projecte 4 Implantació de projectes Exelearning 4.1 Proposta d’implantar donar cursos en la sala o patrocinats per la mateixa 4.2 Funcionament d’exelearning 4.3 Possible implantació d’una plataforma Moodle", " Projecte 4 Implantació de projectes Exelearning Exelearning és una eina d’autor de codi obert per ajudar als docents en la creació i publicació de continguts web. 4.1 Proposta d’implantar donar cursos en la sala o patrocinats per la mateixa Una de les activitats de l’empresa és en l’entorn educatiu, de la realització d’obres de teatre en instituts i col·legis. Una bona forma d’introduir la digitalització en les arts escèniques, seria preparar cursos introductors a l’obra que es vol representar. El professorat els poguera impartir abans de la seua representació, i anar preparant als alumnes del que van a veure, o fer cursos o jocs interactius post espectacle per reforçar el missatge que es vol transmetre. 4.2 Funcionament d’exelearning Anem a descàrregues per obtenir el programa per a la plataforma on vulguem construir el projecte. En el següent enllaç Documentació, tenim una explicació de com funciona i les possibilitats d’exportar el projecte siga a la nostra fulla o a espais gratuïts d’allotjament de contingut educatiu que després podem enllaçar. 4.2.1 Llocs on podem penjar el material educatiu BSCW (Basic Support for Cooperative Work) Graasp Pertany a la comunitat europea i la seua finalitat és crear i allotjar material educatiu. Vish Xarxa social educativa per la creació de recursos educatius. 4.3 Possible implantació d’una plataforma Moodle Si es volguera anar un poc més lluny, es podria implantar una plataforma Moodle, per donar cursos relacionats en les arts escèniques, on es colgaria material, hi ha diversos allotjaments on podem penjar el nostre Moodle a preus raonables, per fer un curs que ens interesse en un moment donat, mirar Best Moodle Allotjament Services "],["desenvolupament-appweb.html", "Projecte 5 Desenvolupament Appweb 5.1 Desenvolupament d’una app de gestió d’informes de la sala 5.2 Tasques a realitzar", " Projecte 5 Desenvolupament Appweb L’empresa vol personalitzar informes per a la seua comptabilitat i la demanda de subvencions, on es reflectiran el nombre d’obres, espectadors, gasto, i fer estadístiques de l’assistència de públic i comparar en Google analític. 5.1 Desenvolupament d’una app de gestió d’informes de la sala Es proposa la realització d’una appweb que realitze aquestes tasque. En principi, seria mitjançant una base de dades, on introduir els valors que recopile l’empesa, i un entorn web on es puguen fer consultes i redactar informes. Pendent de resoldre, la conveniència o no de la utilització d’una base de dades, una SQLite o un fitxer json, ja que el nombre de dades no és massa elevat. Investigar com es fan aquestes coses, ja que jo soc de xarxes, no de programació. L’app es colgaria en el servidor de l’empresa, perquè es puguen fer consultes des d’allí. El que implica la configuració d’un servidor en la mateixa sala, on de pas posarem un servidor de dns, un de fulles web si es vol realitzar interaccions amb el públic, optatiu un de correu, i es podria imantar també un servidor git, per fer les còpies de seguretat i seguiment de versions, dels projectes com la revista que publiquen o obres de teatre, en el cas que les vulguen crear de forma col·laborativa. Després de provar diverses alternatives, com gitlab, Gogs, la millor alternativa pareix ser Gitea, és molt lleuger, es pot instal·lar amb una base de dades SQLite, i l’entorn web que proporciona és molt paregut al de Github, i les exigències de l’empresa, no són les d’un entorn de programació. La millor opció per aquest cas és traure un compte de GitHub de l’empesa, on es guarden els projectes. 5.1.1 Alternatives El projecte es pot realitzar en node.js, express i vue.js R i shiny, que pareix més fàcil, el que implica la instal·lació de R en el servidor, perquè ens servisca l’aplicació. 5.2 Tasques a realitzar S’ha d’investigar la programació de plantilles de Latex, per a formatjar els documents d’eixida, en el logo de l’empresa, i un format propi de redaccions d’informes. El funcionament de Pandoc, per a poder traure els diferents formats que necessitem, pdf, docx … Crear un xicotet doc del funcionament de markdown per a la gent de l’empresa. "],["remodelat-de-la-fulla-web-de-espacio-inestable.html", "Projecte 6 Remodelat de la fulla web de Espacio Inestable 6.1 Reformulació de les estratègies de venda d’entrades 6.2 Instal·lació del plugin de venda d’entrades i tema per a la fulla web 6.3 Tasques a fer", " Projecte 6 Remodelat de la fulla web de Espacio Inestable 6.1 Reformulació de les estratègies de venda d’entrades L’estratègia de la venda d’entrades, és gestionada per una empresa de venda d’actes, es planteja la possibilitat de migrar a una altra plataforma o autogestió d’aquestes. 6.2 Instal·lació del plugin de venda d’entrades i tema per a la fulla web Es recomana d’implementació d’una solució com la que és té en aquesta fulla, on podem veure una demostració de les seues funcions.ticketera En aquest plugin per a WordPress, tenim la possibilitat de configurar les nostres entrades, afegint imatge de l’obra, inclusió de codis Qr (per al wifi), implantar la compra d’entrades, amb selecció de la cadira en el pati de butaques. S’hauria de contractar els serveis de stripe, la passerella de cobrament. El preu és 1,4% +0,25 €, la configuració en WordPress és molt fàcil, i el tema i el plugin ja estan preparats. Una altra part interessant d’aquest plugin, és la possibilitat de validació d’entrades mitjançant un codi Qr, que funciona en una aplicació de movil, actualitzant la base de dades d’assistència real a l’acte. 6.3 Tasques a fer Configurar el tema de la fula web perquè tinga l’aspecte desitjat, es podria comprar també un tema que ofereixen en la mateixa ticketera dissenyat expressament per a teatres i actes. "],["configuració-del-servidor.html", "Projecte 7 Configuració del servidor 7.1 Altres coses a fer", " Projecte 7 Configuració del servidor Descriurem com seria la posada en funcionament del servidor. Per dur a terme aquest projecte anem a fer una simulació en una màquina virtual en un Ubuntu server que descarregarem d’Ubuntu server. I simularem que tenim 3 discs durs per a fer un RAID. Ubuntu en raid Anem a fer la instal·lació en format RAID 5, farien falta 3 discos, però ens assegurem recuperació contra fallades, es pot fer també amb raid 0 on augmenta la velocitat, però no tenim recuperació en fallides d’un disc, es perd tot. Hem de decidir si volem el tipus 0, on es té tot l’espai dels discs durs, i augmentem la velocitat de funcionament, o fem un 5 on l’espai d’un dels discs es perd per a fer còpia de paritat, i no és tan ràpid, pel tipus d’empresa, la velocitat punta del 0 no és necessària, i jo primaria la seguretat. Recomane el tipus 5. Hem de comprar 3 hd sata depen de la mida valdrà un preu, per exemple WD Blue 2TB SATA està en Amazon per 44 euros, per 3 discs, 132 euros, i tindríem una capacitat d’emmagatzemament de 4 TB en recuperació si falla un. Si no, es compren 2 per 88 i no fem un tipus 0. Exemple de configuració de RAID 1 en aquest tipus es fa una còpia espill dels discs. es perd el 50% de l’espai total per fer la còpia, no crec que interesse. No es el cas que ens interessa. Aci tenim com muntar un RAID 5 en Ubuntu, ja en funcionament. Nosaltres començarem des de zero, fent una instal·lació neta. Mira açò, igual es millor fer un vlm i posar raid després, o formatar en btrsf LVM+RAID Possibilitat de no fer un RAID , fer un lvm en diversos discs i posar sistema de fitxer btrfs en compressió, encara que si el que es guarda es majoritàriament vídeos, no te massa sentit, es perd un poc de rendiment, i si el server no es massa potent, no valdria la pena, te millores en la recuperació d’erros, i em pareix millor per a un sistema en poc manteniment per al futur. El que cal pensar ara és, sistema en home en espai per a usuaris, o muntar en mnt/espai perquè es guarden els vídeos. Per una part, tindre carpetes d’usuaris, estaria be, si es posa al final servidor web, i fer que cada usuari servisca des del seu directori públic, o montar el directori per xarxa, per què guarden allí fitxers de recuperació. El més segur es que no ho gasten mai. L’opció de fer sol servidor de disc dur, i posar allí una carpeta perquè colguen el que es vol servir per web interna, igual seria millor opció. Més que res, és pe a l’hora de fer les particions del disc dur, li donem més a home, o posem el pes de l’espai a la partició d’espai. Clarament, les he de separar, ja que no vull que per una d’aquestes es quede cense espai i que el servidor comence anar malament o directament no funcione per falta d’espai, i més si es guarden allí les captures de reproducció en línia, que per si una d’aquestes, es queda encés, el pot deixar cense disc en poc de temps. Resoldre el problema dels permisos, que grups crear, que usuaris i que pot fer que. 7.1 Altres coses a fer Possible instal·lació d’un NAS Fer les funcions de NAS en el mateix servidor, fer RAID, depenent del pressupost, fer un de tipus 0, 1 o 5. Configurar un DNS en el servidor. Configurar un DHCP, de moment ho descartem, si anara a més el wifi en la sala, i es vulga fer més interaccions amb el públic, seria per a estudiar, soles per al número d’ordinador del centre, amb IP fixes, va que el mates. Servidor d’impressió, Configurar el server com a servidor d’impressió. Configurar un servidor web, per als serveis que es poden posar. La web de, es poden posar WordPress per a cada usuari, perquè facen les seues proves, o intentar convèncer de les bondats d’Hugo o Jenkyll, estudiar la seua configuració, creació d’un tema adequat per a la sala, i explicar la forma que el puguen gastar. "],["notes.html", "Projecte 8 Notes 8.1 Recordatoris", " Projecte 8 Notes Recordatoris de com es fan les coses, després el esborrare 8.1 Recordatoris Imatge 8.1: Prova de gif Pera que els gif no vagen al pdf Falta saber com es canvia per un png ```{r sheets-option-drag, fig.pos=‘h’, fig.cap=“Prova de gif”} if(knitr::is_html_output(excludes=“markdown”)) knitr::include_graphics(“imatges/provacomp.gif”) ``` Per a comprimir els gif $ gifsicle -O3 --colors=64 --use-col=web --lossy=100 prova.gif -o comgif.gif o no tan bestia $ gifsicle -O3 --lossy=80 prova.gif -o provacomp1.gif ::: {.rmdinfo .centre data-latex=“{}”} la la la ::: {.rmdcuidao data-latex=“{ves en conter}”} {.rmdwarn data-latex=“{Perill}” {.rmdtip data-latex=“{Tip}”} Aço es una nota {.rmdnote data-latex=“{Nota}”} ves en cuidaoooo no se si açò tancara o continua fins el mas enllà ves en cuidaoooo no se si açò tancara o continua fins el mas enllà Perquè no isca en el pdf ```{asis, echo=!knitr::is_latex_output()} ::: {.rmdcuidao} ves en cuidaoooo no se si açò tancara o continua fins el mas enllà ::: ``` "],["nextcloud.html", "Projecte 9 Nextcloud 9.1 Pfsense", " Projecte 9 Nextcloud provem els scripts de nextcloud/vm Per instal.lar anem inst nextcloud fes la taua vm sudo git clone https://github.com/nextcloud/vm.git Provar aço en una ubuntu 20.04 que es la compatible. a vore els scripts que tal van, diu que la harderitza a nivell A+ per manual sudo unzip nextcloud-23.0.0.zip -d /var/www/html/ sudo mkdir /var/www/html/nextcloud/data sudo chown -R www-data:www-data /var/www/html/nextcloud/ a part afegim la carpeta on volem guardar les dades, normalment muntarem en mnt un disc per fer-ho, en este cas ho fem en la carpeta home/nextcloud i li donarem permisos a www-data. abans mkdir /home/nextcloud sudo chown -R www-data:www-data /home/nextcloud install collabora collabora altre oficial , mirar també els connector de libreoffice, si en aço ja sobra… o si el que volen gastar es el Office, hi ha un connector, si ja tenen conter en el online,vincular. languagetool fiduswriter Mirar la possibilitat de implantar Etherpad per al treball col.laboratiu d’escriptura, dins el nextcloud. Mirar tambe: joplin mdbook libreoffice wopi collabora collabora package 9.1 Pfsense Per exposar el servidor a internet , configurar el tallafoc, i pensar les opcions de fer un vpn o exposar el ports dels serveis que es vol que ens connectem. Mes segur un VPN , en contra, el manteniment, el següent administrador ha de gestionar els certificats dels nous usuaris. Exposar soles els ports de nextcloud, https 443, i des de aci accedir a la resta de serveis que es vol donar. Soles es ha de gestionar donar d’alta als nous usuaris, si es deixa configurat un nombre ampli de grups possibles, soles s’ha de afegir al tipus de grup que volem. "],["servidor-1.html", "Projecte 10 Servidor 10.1 Material 10.2 Avantatges 10.3 Accés point del wifi 10.4 Servidor de disc per al video 10.5 Pressupost", " Projecte 10 Servidor Es proposa la compra d’un servidor d’ebay, per fer alli les màquines virtuals que requerim, per desenvolupar el projecte. En el servidor es vol crear instàncies d’un servidor de disc per a les gravacions de video. Servidor de pàgines web. Servidor de Nextcloud. Maquina virtual per controlar el wifi de la sala. Tallafocs i entorn de seguretat. Mirar si es posa un Ldap o en l’entorn de Nextcloud es pot controlar els accessos i recursos servits als usuaris. Tutorial nextcloud 10.1 Material Servidor. En ebai el podem trobar per uns 250 euros, amb 64G de Ram, podríem estirar més fins als 128G, Pero realment no esn fa falta tanta, per al que volem posar. (mirar més models), té 4 badies per a hdd on podem fer un Raid 5 en tres d’ells i l’altre pe arrancar les VM. Especificacions Documentació del model, si va avant, mirar posar un ssd, no està clar. No veig comp amb ubuntu, igual mirar altre server. Nota: Si és compatible. Dimensions servidor Cal buscar un rack que done les dimensions. video de instal-lació Discs durs, admet segons documentació 4 SATA de 4Gb. Recomane SEAGATE Barracuda ST4000DM004 4000GB 3.5 Serial ATA III amazon amazon usa Farien falta 3 per a fer el Raid, estaria bé tindre un de reserva per si falla, un disc, i regenerar el raid. Si s’adquiriren 4, es pot fer un Raid 6 que té dos de paritat. Ell soles es regenera. Tindríem dos discs de 4 TB, que serien 8Gb d’espai efectiu i un de paritat. Preguntar a Toni el Hypervisor més adequat. Un Sai, mirar potencia, quan es decideixen el server. Es pot posar també una segona font al servidor. Buscar preus. Un armari Rack per al servidor i el switch. Switch, preguntar a Toni sobre els cisco, reciclats. Patch panel, cables, connectors rj45 … 10.2 Avantatges La idea és muntar un servidor de Nextcloud, per l’emmagatzematge dels fitxers de la sala. Aprofitar aquest entorn per a posar també, treball en grup de documents amb Collabora, o si els agrada més el plug de MS office en línia. Encara que hi ha altres solucions dins el mateix Nextcloud per a fer treball en grup. Provar d’integrar Etherpad en Nextcoud, en un Docker i afegir-lo al menu. Crear grups de treball on es puga compartir fitxers, com per exemple, un de redactors de la revista, on puguen discutir sobre els articles a publicar. Un altre per als treballadors, per a l’administració, inclús es pot fer grups per a les companyies convidades per fer els seus espectacles. Es pot aprofitar el sistema de Talk que té, per poder fer comunicacions entre els membres de l’empresa, entre el comandament de llums i el vestuari dels actors, entre redactors i director de la revista per discutir els articles… Amb el seu servei de comunicacions privat. 10.2.1 Pfsense Primer que res, hem de posar un sistema de seguretat o DZM, o farem amb Pfsense, mitjançant una VM en el servidor. A l’hora de configurar el pfsese tenim dues opcions. Fer una VPN Exposar els ports que volem, el 443 El millor seria fer una VPN, pero per l’administració de després pot ser un poc complicat per a l’empresa, si no tenen un administrador. Ens decantarem per exposar el port 443. La configuració la posaré en un apartat posterior. Configurarem el DHCP, les vpn, el DDNS i el DNS en aquesta màquina virtual, que sera el cor de la xarxa. 10.2.2 DDNS Traure conter en un DNS dinàmic. En fer la instal.lació de Nexctcloud VM pels scripts de guithub, ja en s crea un en dedyn.io, mirar altres opcions. A més ens crea un certificat d’aquest domini en Lets encrypt. Mirar la possibilitat de la creació d’un subdomini en el domini de l’empresa, preguntar el dns suporta subdominis, i qui dona el servei. 10.2.3 Nextcloud Fem servir els scripts de instal.lacio, que afegeixen millores de seguretat i rendiment. Fer un lvm en el RAID 5 del servidor i donar format ZFS, la VM de Nextcloud en el ssd si el podem posar o en el disc de les VM 10.3 Accés point del wifi En una altra VM posar el software que controla les antenes del wifi 10.4 Servidor de disc per al video Normalment les càmeres ip funcionen en un servidor d’ftp on es guarden les gravacions. En el Raid 5 fem una altra partició lvm d’espai per aquest propòsit, i posem un servidor de sftp en una altra VM on també tindrem el servidor web. Aquesta partició de dades la podem compartir per xarxa amb la VM de Nextcloud on podem muntar medis externs i compartir en els usuaris que volem, par a què es puga muntar també en ella, perquè els usuaris puguen veure les gravacions, sols dret de lectura. 10.5 Pressupost Servidor 265 + iva = 300 euros Hd 90 x 3 =270 euros Rack 150 euros switch ? al voltant de 300 euros Antena wifi 150, per antena, si són dos, el segon pot ser d’uns 100 euros. Patch panel 25 euros. Cables cat6 60 euros 100 Mts, rosetes 7 euros, Rj 45 20 euros (100 unitats) Imprevistos 15% 3%, el 3% clar. Total, crec que al voltant de 1500 euros, està fet. Càmeres ip, el que vulgueu gastar, de 2500 una amb cmos sony, o per 450 una Aida HD-NDI-200, amb una lent fixa, es posa enfocat a l’infinit, amb una lent lluminosa, en gran profunditat de camp, i arreglat. video video poca llum, atre, o es pot provar en càmeres ip de cctv, que per 100 euros hi ha que no estan malament, El problema és la poca llum de la sala. I l’aberració esfèrica que es veu en alguns videos de youtube, deu ser cosa de l’ull de peix que posen per ampliar el camp de visió. Convertidor a ndi, es pot posar per convertir el senyal de la camera HDMI a ndi, o es pot fer en un pc mitjanament potent i el software de DNI. Nx Witness VMS nginx streamer video Shinobi El recomanat "],["pfsense-2.html", "Projecte 11 pfSense 11.1 Per a què el farem servir 11.2 Requeriments 11.3 Instal·lació 11.4 Configuració 11.5 vpn 11.6 Configuració del punt final", " Projecte 11 pfSense Utilitzem pfsense com a cor de la xarxa El projecte pfSense® és una distribució personalitzada gratuïta de codi obert de FreeBSD dissenyada per utilitzar-la com a tallafoc i encaminador gestionada completament per una interfície web fàcil d’utilitzar, el programari pfSense inclou una llarga llista de funcions relacionades. El sistema de paquets pfSense permet una major expansió sense afegir vulnerabilitats de seguretat potencials a la distribució base. 11.1 Per a què el farem servir Tallafocs perimetrals, pfSense admet xarxes que requereixen diverses connexions a Internet, diverses xarxes LAN i diverses xarxes DMZ. De moment soles configurarem una WAN, pero estarà preparat pel seu escalat si fera falta en un futur, donar més amplada de banda o redundància de connexió a internet. Encaminador LAN, per connectar diversos segments de xarxa interna amb VLAN configurades amb troncal 802.1Q. Dispositiu VPN, com a dispositiu de xarxa privada virtual independent afegeix capacitats VPN sense interrompre la infraestructura del tallafoc existent i inclou diversos protocols VPN. Dispositiu de servidor DHCP, permet que un dispositiu com el programari pfSense® assigne dinàmicament adreces IP als clients des d’un grup d’adreces predefinits. DHCP també envia informació de configuració als clients, com ara una passarel·la, servidors DNS, nom de domini i altres paràmetres útils. DNS resolver, el gastarem com a DNS primari. Portal captiu, possibilitat de fer un Hotspot per a la wifi pública. Obliga els usuaris a autenticar-se abans de concedir accés a Internet. Quan siga possible, el tallafoc presenta automàticament una pàgina web d’inici de sessió en la qual l’usuari ha d’introduir credencials com ara un nom d’usuari/contrasenya, un codi de val o un simple acord de clic. DDNS, per a configuració del DNS dinàmic i la renovació de credencials. 11.2 Requeriments La distribució de programari pfSense® és compatible amb la majoria de maquinari compatible amb FreeBSD. Les versions actuals del programari pfSense són compatibles amb el maquinari d’arquitectura de 64 bits (amd64, x86-64) Requisits mínims CPU compatible amb amd64 (x86-64) de 64 bits 1 GB o més de RAM, El propi sistema operatiu, juntament amb altres serveis, requerirà almenys 175-256 MB de RAM addicional i possiblement més segons les funcions utilitzades. Els tallafocs en entorns que requereixen un gran nombre d’estats simultanis han de tenir suficient RAM per a contenir la taula d’estats. Cada estat necessita aproximadament 1 KB de RAM. Cada connexió a través del tallafoc consumeix dos estats: un entrant al tallafoc i un altre que surt del tallafoc. Unitat de disc de 8 GB o més (SSD, HDD, etc.) Una o més targetes d’interfície de xarxa compatibles, Broadcom 5720, amb driver bge. Problemes específics de la targeta Broadcom bce, fer el que recomana el manual, La del servidor recomanat és bge, no hauria de tindre problemes. Opcional, Suport de l’accelerador criptogràfic. el servidor recomanat te AES-NI pag. 17 del manual. Recomanat per a VPN siga més fluid, i no sature la CPU. No cal seleccionar res perquè OpenVPN utilitze AES-NI, natiu. Unitat USB d’arrencada o unitat òptica d’alta capacitat (DVD o BD) per a la instal·lació inicial 11.3 Instal·lació Mitjan un dispositiu Netgate o viralitzant que és el que gastarem. Descarreguem la imatge AMD64 ISO Estem en fase de proves, farem l’instal.lació en Virtual Box. Configuració de prova VBox pfSense VBox Recomanem utilitzar hipervisors de tipus 1 per a ús de producció. Els hipervisors de tipus 2 com ara VirtualBox o VMware Workstation funcionen bé per a les proves, però eviteu utilitzar-los per a funcions de producció sempre que sigui possible. La forma d’instal.lació és com qualsevol VM, hem baixat la versió 2.6 En l’opció 2 definim les ip de les targetes, pfSense les detecta automàticament, pero les he canviat per les proves. En el meu cas de moment és 192.168.0.254 per a la WAN, la que comunica en internet, i la interna LAN 192.168.56.10 per comunicar en vboxnet amb l’amfitrió, no són definitives, la LAN es recomana ser una 172 si es vol fer VPN. mirar lo de la ip de la WAN, ara es DHCP, canviar la nota El que tenim en consola VirtualBox Virtual Machine - Netgate Device ID: 8258d4ba8668f91ae9d7 *** Welcome to pfSense 2.6.0-RELEASE (amd64) on pfsense *** WAN (wan) -&gt; em0 -&gt; v4: 192.168.0.254/24 LAN (lan) -&gt; em1 -&gt; v4: 192.168.56.10/24 0) Logout (SSH only) 9) pfTop 1) Assign Interfaces 10) Filter Logs 2) Set interface(s) IP address 11) Restart webConfigurator 3) Reset webConfigurator password 12) PHP shell + pfSense tools 4) Reset to factory defaults 13) Update from console 5) Reboot system 14) Disable Secure Shell (sshd) 6) Halt system 15) Restore recent configuration 7) Ping host 16) Restart PHP-FPM 8) Shell Enter an option: Connectant via web i tenim: hem d’accedir des de la xarxa LAN, per defecte el tallafoc bloca la GUI des de la WAN. pfsense gui La resta de configuracions es pot fer mitjançant aquesta GUI. 11.4 Configuració Comencem la configuració del pfSense, es pot fer pel wizard o manualment, descriurem breument la manual. 11.4.1 Informació general En sistema -&gt; configuració general, donarem nom al host i el domini, així com l’idioma de la GUI, NTP, DNS primari. El nom del host sera pfsense, i el domini inestable.dedyn.io, ja que em tret un conter en el DDNS de deSEC amb aquest nom. pfsense_conf1 El servidor DNS es poden deixar en blanc si el DNS Resolver està actiu mitjançant la configuració predeterminada. La configuració predeterminada té el DNS Resolver actiu en mode de resolució (no en mode de reenviament), quan s’estableix d’aquesta manera, el DNS Resolver no necessita reenviar servidors DNS, ja que es comunicarà directament amb els servidors DNS arrel i altres servidors DNS autoritzats. Per forçar el tallafoc a utilitzar aquests servidors DNS configurats, activeu el mode de reenviament al DNS Resolver. Mes tard podem fer un ns2 replica i configurar aquesta opció dels dos servidors. 11.4.2 Configuració WAN Aquesta és la xarxa externa que s’enfronta a l’ISP o a l’encaminador amunt, de manera que l’assistent ofereix opcions de configuració per admetre diversos tipus de connexió d’ISP comuns. Tipus WAN, El tipus seleccionat ha de coincidir amb el tipus de WAN requerit per l’ISP, l’opció predeterminada és DHCP a causa del fet que és el més comú, aquesta configuració permet que un tallafoc “Just Work” sense configuració addicional. Configuracio WAN Seleccionem en el tipus DHCP i ques proporcione una ip l’encaminador, la podríem posar en estàtica i ens apareix un nou menu on li donaríem una ip en la mateixa xarxa que l’encaminador, una màscara i la direcció del gateway, l’encaminador. 11.4.2.1 Bloqueja les xarxes privades RFC 1918, Bloqueja les connexions procedents de xarxes privades registrades d’entrar a la interfície WAN. Bogon, el tallafoc bloqueja l’entrada de trànsit si prové d’espai IP reservat o no assignat que no s’hauria d’utilitzar. La llista de xarxes bogon s’actualitza periòdicament en segon pla i no requereix cap manteniment manual. Seleccionem els dos bloquejos. Bloqueja les xarxes 11.4.3 Configuració LAN Tenim dues opcions Si aquest tallafoc no es connecta a cap altra xarxa mitjançant VPN, és possible que la 192.168.1.0/24 xarxa predeterminada siga acceptable. Si aquesta xarxa s’ha de connectar a una altra xarxa, mitjançant VPN des d’ubicacions remotes, triarem un rang d’adreces IP privades molt més fosc que el predeterminat comú de 192.168.1.0/24. L’espai IP dins del 172.16.0.0/12 bloc d’adreces privades RFC 1918 és generalment el que s’utilitza amb menys freqüència, així que trieu alguna cosa 172.16.x.x per 172.31.x.x evitar les dificultats de connectivitat VPN. Si un client remot es troba en un punt d’accés sense fil utilitzant 192.168.1.x (molt comú), el client no es podrà comunicar a través de la VPN. En aquest cas, 192.168.1.x és la xarxa local del client al punt d’accés, no la xarxa remota a través de la VPN. Configuració LAN De moment ho deixarem en la 192.168.56.x per acabar la integració de tots els serveis, i ho modificarem en implementar la VPN. 11.4.4 Configuració de interfaces 11.5 vpn Les VPN d’accés remot permeten als usuaris connectar-se de manera segura a una xarxa des de qualsevol lloc on hi haja una connexió a Internet disponible. Per oferir als empleats la possibilitat de treballar des de casa. També pot permetre als contractistes o venedors l’accés temporal a una xarxa. Amb la proliferació de telèfons intel·ligents, els usuaris tenen la necessitat d’accedir de manera segura als serveis interns des dels seus telèfons mitjançant una VPN d’accés remot. Les VPN d’accés remot es poden configurar de manera que passe tot el trànsit del sistema client a través de la VPN, té un impacte en el rendiment, LA farem soles per accedir als serveis de l’empresa. 11.5.1 Autenticació Possibilitats IPsec OpenVPN WireGuard (No recomanable) L’ús d’OpenVPN amb certificats, autenticació TLS i autenticació d’usuari és el mètode més segur i més senzill d’implementar. El xifratge es veu compromès si es comprometen les claus privades de l’estructura PKI, tot i que l’ús de múltiples factors com l’autenticació TLS a la part superior de la PKI pot mitigar part del perill. OpenVPN requereix l’ús de certificats per a l’accés remot a la majoria d’entorns, que inclou la seua pròpia corba d’aprenentatge i pot ser una mica difícil de gestionar. Hi ha un assistent per gestionar les configuracions d’accés remot d’OpenVPN més habituals i els paquets d’exportació de clients d’OpenVPN faciliten el procés de posar en funcionament els clients. OpenVPN té clients disponibles per a Windows, Mac OS X, tots els BSD, Linux, Solaris i Windows Mobile, Android, iOS, però el client no ve preinstal·lat en cap d’aquests sistemes operatius. En funció del desplegament, els clients mòbils (Accés remot) poden rebre una configuració automàtica en determinats casos, poden rebre automàticament una adreça IP (recomanat 172…) assignada des d’un grup, i es poden enviar nombroses opcions addicionals als clients per controlar el seu comportament des del costat del servidor (encaminament, DNS i molts altres). 11.5.2 Firewall OpenVPN és molt compatible amb el tallafoc. Com que utilitza un únic port UDP o TCP i no es veu afectat per les funcions NAT habituals. OpenVPN admet NAT entrant (per exemple, reenviaments de ports) i sortint mitjançant la pestanya OpenVPN del grup i també a les interfícies assignades. L’única dificultat possible és si el protocol i el port en ús estan bloquejats. Quan s’assignen com a interfície, les instàncies d’OpenVPN admeten completament les regles per túnel. 11.5.2.1 Regles L’assistent VPN d’accés remot d’OpenVPN ofereix, crear regles per passar el trànsit i el trànsit WAN a la interfície d’OpenVPN. El trànsit encapsulat dins d’una connexió OpenVPN activa es controla mitjançant regles definides per l’usuari a la pestanya OpenVPN a Firewall &gt; Regles. Mirar si fem un LDAP 11.5.3 Configuració òptima de xifratge Utilitzeu maquinari compatible amb AES-NI. A la configuració de la Fase 1 (IKE), utilitzeu: AES128-GCM amb longitud de clau de 128 bits per a l’algorisme AES-XCBC per al hash, que en aquest cas és efectivament una funció pseudoaleatòria (PRF). Això donarà el màxim rendiment en combinació amb AES128-GCM en maquinari que pot accelerar tots dos (per exemple, AES-NI) A la configuració de la Fase 2 (SA infantil), utilitzeu: AES128-GCM amb longitud de clau de 128 bits per a l’algorisme No seleccioneu cap algoritme hash. Un algorisme hash no és necessari per a AES-GCM, ja que ja inclou l’autenticació. 11.5.4 UDP UDP té menys despeses generals per a les dades tunelades i, si un client ha de retransmetre, no augmentarà el problema retransmetent tant dins com fora del túnel. 11.5.5 Utilitzeu TLS només per a l’autenticació OpenVPN pot utilitzar TLS tant per a l’autenticació com per al xifratge del canal de control. Realitzar el xifratge del canal de control afegeix més sobrecàrrega, que pot augmentar amb molts clients. Si no cal el xifratge del canal de control, considereu utilitzar TLS només per a l’autenticació. Independentment de quina opció escolliu, el trànsit transportat per OpenVPN està xifrat. 11.5.6 Utilitzeu la negociació de xifrat de dades La negociació de xifratge de dades es pot utilitzar per establir preferències de manera que els clients puguen preferir xifrats més eficients quan siga possible, però es poden utilitzar altres quan siga necessari. Estableix primer seleccions d’alta prioritat com ara AES-128-GCM, seguides d’altres com AES-128-CBC. 11.5.7 Túnels dividits El túnel dividit només envia trànsit per a subxarxes específiques a través de la VPN en lloc d’enviar tot el trànsit. Amb OpenVPN, això es pot fer desmarcant les opcions de redirecció de la passarel·la IPv4/IPv6 i configurant les entrades de xarxes locals IPv4/IPv6. Tanmateix, els clients encara poden anul·lar aquest comportament de forma remota, així que comproveu també les configuracions del client. 11.5.8 Desactiva la compressió La majoria de les dades enviades a través de VPN en entorns moderns ja estan xifrades o no es poden comprimir, cosa que malgasta la CPU quan s’intenta comprimir. A més, vulnerabilitats com VORACLE poden permetre als atacants obtenir informació sobre dades xifrades quan s’han comprimit. 11.5.9 Connexions duplicades Normalment, si un client OpenVPN es connecta utilitzant el mateix nom d’usuari o certificat CN, la connexió anterior es trenca a favor de la nova connexió. Això és més segur, però no permet que cap usuari es connecte diverses vegades. És el cas que tenim, pot estar connectat via web i via app movil. 11.5.10 Utilitzeu UDP Fast I/O Aquesta opció és experimental, però per a aquells que l’han utilitzat, pot resultar en un rendiment molt més elevat. 11.5.11 Augmenta la memòria intermèdia d’enviament/recepció La mida de memòria intermèdia predeterminada és segura, però no òptima. Augmentar la mida de la memòria intermèdia fins a 512 KiB a ambdós costats pot augmentar el rendiment. 11.5.12 OpenVPN i certificats La millor pràctica és utilitzar certificats per a l’accés remot i les VPN de lloc a lloc perquè permet revocar l’accés per a clients o llocs individuals. Idealment, els certificats haurien de ser únics per dispositiu o almenys per usuari. Si un client amb un certificat individual està compromès o l’accés s’ha de revocar per qualsevol altre motiu, simplement revoqueu aquest certificat. No hi ha cap altre client afectat. La GUI del programari pfSense inclou una interfície de gestió de certificats totalment integrada amb OpenVPN. Les autoritats de certificació (CA) i els certificats de servidor es gestionen al Gestor de certificats a la interfície web, que es troba a Sistema &gt; Gestor de certificats. Els certificats d’usuari també es gestionen a la interfície web, com a part del gestor d’usuaris integrat que es troba a Sistema &gt; Gestor d’usuaris. Els certificats es poden generar per a qualsevol compte d’usuari creat localment al tallafoc, excepte el compte d’administrador predeterminat. Peer to Peer (SSL/TLS) Peer to Peer (clau compartida) Accés remot (SSL/TLS) Accés remot (autenticació d’usuari) Accés remot (SSL/TLS + autenticació d’usuari) Utilitzarem Accés remot (SSL/TLS + autenticació d’usuari) Aquesta és l’opció més segura disponible. No només obté els avantatges d’altres opcions SSL/TLS, sinó que també requereix un nom d’usuari i una contrasenya del client quan es connecta. L’accés del client es pot eliminar no només revocant el certificat, sinó també canviant la contrasenya. A més, si no es descobreix immediatament una clau compromesa, el perill es redueix perquè és poc probable que l’atacant tinga les claus i la contrasenya. 11.5.13 Mode de dispositiu OpenVPN es pot executar en un dels dos modes de dispositiu: tun: Funciona a la capa 3 OSI i realitza l’encaminament en interfícies punt a punt. Toc: Pot funcionar a la capa 2 OSI i pot realitzar tant l’encaminament com el pont si és necessari. Els clients com els que es troben a Android i iOS només admeten el mode tun a les aplicacions que la majoria de la gent pot utilitzar. Farem servir aquest mode. 11.6 Configuració del punt final "],["infraestructura.html", "Projecte 12 Infraestructura 12.1 Xarxa per a la sala 12.2 Descripció de les instal.lacions 12.3 Descripció de les xarxes", " Projecte 12 Infraestructura 12.1 Xarxa per a la sala Es proposa la següent configuració de xarxa per a la sala. Xarxa de CCTV per al registrament / reproducció en línia de les obres de teatre. Xarxa de wifi, pública i una privada. Xarxa interna per als treballadors, amb connexió externa per VPN. Pla de la sala pla de la sala 12.2 Descripció de les instal.lacions 12.2.1 Oficina En l’oficina tenim l’entrada de la connexió de fibra a internet. Des d’aci portem la connexió de xarxa al nucli de comunicacions on tenim la infraestructura de la xarxa, el commutador, el servidor, emmagatzematge de disc. Des del nucli de comunicacions, tornarem una connexió de xarxa cap a l’oficina per donar accés als serveis interns i eixida a internet. 12.2.2 Sala d’espera En aquest espai, tenim l’ordinador de venda d’entrades al que li donarem connexió, siga directa al commutador, per la connexió de l’oficina o el canal wifi privant. En el centre de la sala aniria l’antena wifi PoE connectada al nucli de comunicacions. 12.2.3 Escenari En la sala d’espectacles es traurien 3 connexions de la xarxa video. Central, baix de la taula de llums, on es connectara un Camera ip PoE fixa. Lateral, una a cada banda de l’escenari, camera desmuntable que es pot traslladar lateralment segons les necessitats de l’obra representada. Es recomana que aquesta siga del tipus PTZ. Podent ser col.locada a la dreta o l’esquerra de l’escenari. Micròfon ambient que el connectarem a la camera central que es fixa. Una connexió per a la xarxa pública, punt per l’antena wifi, al centre del sostre de l’escenari, per donar millor cobertura. Un punt de connexió en el vestuari, per comunicació amb la xarxa interna, que pot donar cobertura a l’escenari en cas de conferències, o altres actes que necessiten bona connexió de xarxa. 12.3 Descripció de les xarxes La configuració de les xarxes, la farem amb 3 VLAN. 12.3.1 VLAN Video Xarxa interna per la qual anirà el circuit intern de televisió, siga per la reproducció en línia o per fer gravació de les obres en el servidor. Per aquest propòsit, muntarem en el servidor una VM on guardarem les còpies perquè no siga afectat el rendiment per la resta de serveis. Espai que compartirem en la VLAN d’oficina per poder editar el videos posteriorment. Configurarem accés a aquesta Vlan des del punt wifi de l’escenari, per poder gastar el movil com a camera en les representacions. 12.3.2 VLAN pública Xarxa amb connexió a internet per al públic general a través dels punts wifi. La podem configurar amb un portal captiu, amb pfSense, donat d’alta un usuari generic amb permís de connectar a certes hores coincidint en les representacions, canviant el password en cada obra, que oferirem al públic per un codi QR. Es pot aprofitar aquesta connexió per a redirigir als espectadors en un primer moment a un servidor web propi on publicitar properes obres, donar més informació de l’obra que van a veure, o interactuant amb ells via web en el transcurs de la representació. 12.3.3 VLAN privat Xarxa amb connexió a internet i als serveis oferits per la sala. Es donaran els següents accessos. Taula de llums, perquè puguen accedir a recursos guardats en el servidor, mantenir comunicació amb el vestuari. Vestuaris, comunicació o recursos de xarxa a l’escenari. Oficines, donar accés a recursos del servidor, donar xarxa a telèfon ip instal.lat. Punts wifi, crearem una segona xarxa amb enquesta Vlan en les antenes wifi de sol accés per als treballadors de la sala. "],["servidor-2.html", "Projecte 13 Servidor 13.1 Hardware", " Projecte 13 Servidor Es proposa la compra d’un servidor d’ebay, Per a fer funcionar els serveis que volem oferir. En el servidor volem implantar els següents serveis: Un servidor de disc per a les gravacions de video. Servidor de pàgines web, per a le xarxa pública. Servidor de Nextcloud. Servei d’espai en el núvol. Comunicació entre els membres. Serveis ofimàtics col.laboratius. Agenda, calendari, integrar noves apps generades per a l’empresa. Connectar en enmagtcenament extern per visualitzar o descarregar les gravacions de video. Maquina virtual per controlar el wifi de la sala. Tallafocs, DNS, DHCP, VPN (pfSense). Servidor Ldap per gestionar usuaris Nextcloud i VPN. 13.1 Hardware Servidor. En ebai el podem trobar per uns 250 euros + IVA, amb 64G de ram. Especificacions server Documentació del model, i manuals, owner manual Compatibilitat amb ubuntu server, és compatible amb la versió 14 i posteriors. En la fulla de Dell És compatible amb la versió 14.04 LTS, no apareix en la llista, manté la compatibilitat hardware amb les més recents. És un servidor del 2014, pero per als requisits que requerim, pocs usuaris, tràfic limitat, és suficient. A una mala Posem CentOS Dimensions servidor Cal buscar un rack que done les dimensions. video de instal-lació Discs durs, admet segons documentació 4 SATA 3.5’’ o 8 de 2.5’’ Hot-plug. On fariem RAID per hardware. RAID: Kit RAID H710 Mini 512 MB NV (SAS/ SATA ) - 0/1/5/6/10/50/60 Caddies: 4 LFF (3.5”) incluidos Recomane SEAGATE Barracuda ST4000DM004 4000GB 3.5 Serial ATA III amazon amazon usa Farien falta 3 per a fer Raid, estaria bé tindre un de reserva per si falla un disc, i regenerar el Raid. Si en compren 4, es pot fer un Raid 6 que té dos de paritat. Tindríem dos discs de 4 TB, que serien 8Gb d'espai efectiu i un de paritat. RAM: RAM registrada DDR3 de 64 GB. No és la més rapida del mercat, pero suficient per al que necessitem: pfSense Min 1GB (imatge oficial), 2GB Servidor HD video 4 GB, si sobra, posar un poc mes, estudiar les demandes de 3 càmeres ip. Nextcloud Min 2GB, recomenat + 8GB Ldap, web server, antenes wifi, Collabora office server, algun altre servei futur, si es vol mail intern … (he de pensar si fer una altra VM o repartir en vaires) 4GB. UPC: 1x Intel Xeon E5-2440 V2: 8 núcleos, 16 subprocesos, 1,90 GHz (aumento de 2,40 GHz, caché de 20 MB, TDP de 95 W) Segons la informació del venedor. &gt; Bisel: No incluido Rieles: Rieles no incluidos Factor de forma: Montaje en rack 1U Parte trasera: 1 puerto RJ-45, Preguntar si no es uno doble. En la documentacio oficial, la serie porta I/O adapter options 1Gb Ethernet: Broadcom 5720 Dual Port 1Gb NIC The Broadcom 5720 is a 14th generation 10/100/1000Base-T Ethernet LAN controller Broadcom 5720 2x1Gb Base-T 2 fonts d’alimentació redundants. Fuente de alimentación: 2 fuentes de alimentación intercambiables en caliente de Dell Platinum efficiency 350W or 550W power supply Dell OpenManage Systems Management OpenManage Essentials Acustica, sobre 30db. El posarem en una habitació fora de l’oficina i la sala. No sera problema. "],["switch.html", "Projecte 14 switch", " Projecte 14 switch "],["installació-de-wifi.html", "Projecte 15 Instal·lació de wifi 15.1 Requeriments per a la seua implantació 15.2 Muntatge 15.3 Com fer-ho 15.4 UniFi AP amb pfSense VLAN", " Projecte 15 Instal·lació de wifi 15.1 Requeriments per a la seua implantació Uns repetidors de wifi. S’haguera de pensar si realment es vol instal·lar per tindre cobertura per als 92 espectadors, o es pensa que no tots es connectaran, i començar per un sistema bàsic, ampliable a mesura que augmenten les necessitats. I si es posa, donar-li més ús, no sol accés a internet. 15.1.1 Potència de la connexió d’internet per donar servei Es requereix que l’amplada de banda de la connexió d’internet puga donar servei almenys a 92 espectadors, que se l’afore del pati de butaques. S’ha de limitar l’amplada de banda que oferim als espectadors en cas de realitzar la reproducció en línia al mateix temps, açò ho realitzem assegurant l’amplada de banda en la xarxa del circuit d’imatge. En el commutador. Es recomana contractar una connexió d’amplada de banda minima 300Mb. 15.1.2 Localització dels dispositius de retransmissió Hem d’estudiar el número i posicions en la sala perquè la retransmissió siga òptima. En principi si l’antena és bona, en una en l’entrada de la sala d’actes, seria suficient, o en el sostre, damunt l’escenari. Pero en ser una casa vella de parets immenses, segur hi ha problemes, per a tot l’espai. Es poden posar altres no tan potents, no han de donar servei per a tanta gent. 15.2 Muntatge Antena, una d’aquestes de Unifi, recomane U6 Professional, pero no sé en les parets tan grans que hi ha en la sala, valdrà un sol per a tot l’espai. Es pot posar un altre repetidor sol per al despatx. La idea és fer dues xarxes, una per al públic, en accés a internet i al servidor web intern de promocions, i una altra que tinga accés a la xarxa de l’oficina i recursos del servidor, que podem utilitzar perquè el centre de llums comunique en el servidor de fitxers, utilitzar camera del movil en espectacles, i xat intern. Les antenes proposades són PoE, les alimentarem amb el switch, en portar cable de xarxa ja ho tenim. Software i documentació, posar-lo en una VM, en el servidor. Paquet .deb, per instal.lar en la màquina que fem servir de servidor. min 2GB de Ram, 20 GB hd. Especificacions antena pro 15.3 Com fer-ho unifi wifi en pfsense video de la festa Els punts d’accés WiFi tenen dos tipus: encaminadors híbrids SOHO on tant l’encaminador com els punts d’accés es combinen en un sol per simplificar l’experiència mitjana d’Internet de la casa. Un altre és simplement un punt d’accés WiFi autònom que funciona per si sol i que depèn d’un encaminador independent per a DHCP/encaminament a Internet. Per a això, estudiarem la configuració d’un punt d’accés WiFi autònom amb Ubiquiti UniFi. La Ubiquiti UniFi AP-AC Lite admet una velocitat wifi de fins a 300 Mbps a 2,4 GHz i 867 Mbps a una freqüència de 5 GHz. Els productes UniFi d’Ubiquiti utilitzen una cosa anomenada “controlador de xarxa UniFi”, que és un programari que s’executa al vostre ordinador/servidor per gestionar diversos punts d’accés i configuració/provisionalment. És necessari per al subministrament per primera vegada del nostre punt d’accés UniFi, però no és necessari que s’execute constantment, ja que tota la configuració s’emmagatzema al mateix dispositiu. Comenceu baixant l’instal·lador des d’aquí UniFi-Installer .per a windows. El controlador de xarxa UniFi depen de Java per funcionar. latra milloor vlan wifi 15.4 UniFi AP amb pfSense VLAN altra, una privada i altra publica, soles internet 15.4.1 Infraestructura Tallafoc/encaminador pfSense construït en un mini-PC sense ventilador amb una CPU Core i5, 8 GB de RAM i 6 NIC en 2 sobra, una per a l’entrada amb l’encaminador i l’altra per a l’eixida. UniFi Controller que s’executa en un Raspberry Pi (part del meu projecte de node de control) Punt d’accés UniFi nano HD Passa del switch per fer les VLAN 15.4.2 Procediment Definiu les VLAN i les subxarxes a pfSense Configureu DHCP a pfSense Configureu les regles del tallafoc a pfSense Mapar les VLAN al controlador UniFi Definiu els SSID WiFi al controlador UniFi Definir les xarxes wifi Privada Pública Video, No internet La diferència entre aquests és que la xarxa privada (Verda) pot accedir als recursos de la xarxa interna, Nextcloud, registrador de video … 15.4.3 Definiu les VLAN i les subxarxes a pfSense Sense etiquetar - “VERD” - per a ordinadors i serveis de confiança a la LAN per cable. 20 - “Privada” - per a dispositius WiFi de confiança, com ara els nostres telèfons i ordinadors portàtils. 30 - “Pública” - per a dispositius WiFi no fiables i com ara telèfons i ordinadors portàtils dels convidats. Ja tinc el segon port de l’encaminador (igb1) configurat com a VERD amb la subxarxa 192.168.56.0/24. 15.4.3.1 Per crear les VLAN: Aneu a Interfícies &gt; Tasques Feu clic a la pestanya VLAN Feu clic al botó Afegeix per definir la primera VLAN que serà Privada Seleccioneu la interfície principal perquè siga igb1: la interfície on es troba la xarxa Verda LAN. Introduïu l’etiqueta “20” Introduïu la descripció Privada Desa Repetim els mateixos passos per a la pública i la de video amb 30 i 40 com a VLAN. Les tres aniran per la mateixa interface, la LAN em1, mirar de crear tres virtuals, ja que totes estan dins el mateix server, no boba totes ha d’eixir cap a l’encaminador Més tard afegirem la configuració al commutador perquè puga mapar les VLAN a l’AP, però de moment hem de definir les xarxes per a aquestes VLAN: 15.4.3.2 Definir xarxes Feu clic a la pestanya Assignacions de la interfície A la fila inferior de la taula, seleccioneu la primera VLAN “VLAN 20 a igb1 - opt2 (Privat)” i feu clic a Afegeix Feu clic al nom de la interfície predeterminat que es va generar per a aquesta interfície per obrir-ne la configuració Marqueu Habilita la interfície Canvieu la descripció a “Privat” per a més claredat A Configuració IPv4 estàtica, introduïu l’adreça de la passarel·la per a aquesta interfície i especifiqueu la mida de la subxarxa. Per a la meua xarxa Privat, li vaig donar la passarel·la 192.168.56.1 amb la subxarxa /24. (Li donem la ip 1 de la xarxa a la interfade del pfsense d’aquesta xarxa) El mateix per a les altres dues xarxes 15.4.3.3 Configureu DHCP a pfSense Ara configurem el servei DHCP per a aquestes tres xarxes VLAN noves: Seleccioneu Serveis &gt; Servidor DHCP Seleccioneu la pestanya Privat Marqueu Habilita DHCP Introduïu l’interval DHCP: en el meu cas, vaig triar de 192.168.56.100 a 192.168.56.254. Desa Repetir el mateix per a les altres dues. Amb xarxa 192.168.80.0/24 per a xarxa pública i 192.168.56.100/24 per a la de video. L’antena wifi té capacitat per a 300 connexions, l’aforament de públic és de 92, igual haguérem de restringir a 150 la màscara de xarxa, la de video en principi serien és per si es vol connectar algun movil a la xarxa perquè faça de webcam a l’espectacle, l’enregistrador de video, i si es vol connectar la taula de llums, equip de reproducció en continu o edició. La privada els serveis, treballadors, VPN, per wifi, no seran molts, una 15 com a molt. Entre video i personal no crec que siguen més de 20 en el millor cas, pero tampoc vull limitar les connexions públiques per si es fa un altre acte amb més aforament. Si es podria reservar una 20 per si de cas amb la màscara de xarxa de la pública. 15.4.3.4 Configura les regles del tallafoc a pfSense Estableix les regles com s’adrecen per permetre l’entrada o la sortida del trànsit. La diferència clau entre Pública i privat és que privat pot accedir a interna i internet, pública soles a internat, i Video no tindrà accés a internet. Això s’aconsegueix definint primer un àlies anomenat rfc1918_networks que agrupa els blocs CIDR per als dominis no encaminables Firewall -&gt; aliases -&gt; edit aliases providsional A continuació, definim una regla per permetre les destinacions que no es troben en aquest rang (tingueu en compte el doble negatiu) mentre que la regla de catchall final bloqueja l’accés regles prov Això permet explícitament que Pública accedisca a Internet (adreces que no són rfc1918) mentre que la regla de catchall bloqueja l’accés a adreces locals a Pública. Falta mirar video no vaja a internat, supose sera en action no pass 15.4.4 Assigna les VLAN al controlador UniFi A continuació, anem a UniFi Controller per assignar les VLAN als SSID WiFi A la configuració, feu clic a Xarxes i després a Crea una xarxa nova. Seleccioneu VLAN Només per al propòsit, poseu un nom a la xarxa Privat i doneu-li l’etiqueta VLAN 20 com vam fer a pfSense crea wifi privat Deseu la xarxa i feu el mateix per definir la VLAN Pública Després de desar aquestes dues xarxes, es mostraran a la llista de xarxes; confirmeu que són correctes xarxes wifi 15.4.4.1 Definiu els SSID de WiFi a UniFi Controller A continuació, crearem els SSID de WiFi i els enllaçarem a les nostres VLAN Al menú Configuració, trieu Xarxes sense fil (just a sobre de Xarxes) i feu clic a Crea una xarxa sense fil nova Doneu el nom SSID “Privat” i configureu el xifratge com corresponga (p. ex. WPA-PSK) Feu clic a Opcions avançades per mostrar el camp de l’etiqueta VLAN i introduïu 20 perquè aquest SSID gestionarà el trànsit de la VLAN Privat. xarxa privat ssdi La publica i video, de la mateixa forma. 15.4.5 unifi-pfsense Un script que instal·la el programari UniFi Controller a pfSense i altres sistemes FreeBSD repositori Perill, es trenca si pfSense està en MBR Aquest script destruirà un sistema BIOS heretat arrencat des d’un volum arrel ZFS amb format MBR Per evitar aquest problema, utilitzeu el mode UEFI si està disponible, feu servir particions GPT o utilitzeu un sistema de fitxers diferent de ZFS. L’actualitzador de pfSense eliminarà tot el que instal·leu que no haja arribat a pfSense, inclosos els paquets instal·lats per aquest script. Després d’actualitzar pfSense, haureu de tornar a executar aquest script per restaurar les dependències i el programari. Massa pegues. "],["rack.html", "Projecte 16 Rack", " Projecte 16 Rack "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
